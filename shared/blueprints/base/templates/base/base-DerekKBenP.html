<!DOCTYPE html>
<html lang="nl">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="De Digitale Tweeling maakt verschillende thema's als mobiliteit, klimaat en sociale faciliteiten visueel inzichtelijk.">
        {% block head %}
        <link rel="shortcut icon" href="{{ url_for('base.static', filename='images/fav.ico') }}">
        {% endblock head %}
        <link rel="stylesheet" href="{{url_for('static', filename='css/output.min.css')}}" type="text/css">
        {% if current_user %}
            {% if current_user.is_authenticated %}
                <meta id="sso_data" data-sso="true">
            {% else %}
                <meta id="sso_data" data-sso="false">
            {% endif %}
        {% endif %}
    </head>

    <body class="pt-100 w-full ml-0 bg-body lg:pt-0 min-h-100vh flex flex-col preload overscroll-contain {% if current_user and current_user.is_authenticated %} intern {% endif %}">
        <header id="header" class="flex justify-between items-center w-full min-h-100 max-h-100 text-black fixed shadow-header overflow-hidden lg:z-10 lg:p-0 lg:grid lg:grid-cols-12 lg:px-16 bg-white lg:relative">
            <a id="navbar-brand" class="relative max-h-50 lg:col-span-2 xl:max-h-75 mr-auto" href="/">
                {% block logo %}
                {% endblock logo %}
            </a>

            <nav id="navbar" class="readspeaker_content fixed w-full items-center bg-white top-90 left-0 z-[99999] shadow-header overflow-auto lg:col-span-7 lg:justify-center lg:p-0 lg:overflow-visible lg:flex lg:top-auto lg:left-auto lg:h-auto lg:relative lg:visible lg:max-h-50 lg:shadow-none xl:max-w-full xxxl:justify-center">
                {% block nav %}
                {% endblock nav %}
            </nav>

            <div id="addditional" class="flex flex-row flex-wrap items-center justify-end gap-5 pt-8 xs:gap-12 lg:gap-x-30 lg:pt-0 lg:col-span-3">

                <div id="accessibility" class="fixed h-60 xxl:top-[unset] xxl:right-[unset] xxl:relative">
                    <div id="readspeaker_button1" class="rs_skip rsbtn rs_preserve">
                        <a rel="nofollow" class="rsbtn_play" title="Laat de tekst voorlezen met ReadSpeaker webReader" 
                        href="https://app-eu.readspeaker.com/cgi-bin/rsent?customerid=13998&amp;lang=nl_nl&amp;readclass=readspeaker_content&amp;usePost=true&amp;&url=https://digitale-tweeling-alkmaar-dev.azurewebsites.net&amp;p=wr.iframe_reading_wr">
                            <span class="rsbtn_left rsimg rspart"><span class="rsbtn_text"><span>Lees voor</span></span></span>
                            <span class="rsbtn_right rsimg rsplay rspart"></span>
                        </a>
                    </div>
                </div>

                {% block sso_login %}
                    {% if current_user %}
                    <div id="account" class="flex justify-end mt-4 lg:mt-0">
                        <div id="sso_login" class="group relative inline-flex flex-col items-center justify-center h-50 pb-2 lg:overflow-hidden lg:h-auto">
                            {% if current_user.is_authenticated %}
                                <i class="fa-solid fa-user text-22 text-primary group-hover:opacity-70 lg:pt-10 lg:text-36"></i>
                                <div class="dropdown cursor-pointer absolute text-center overflow-hidden w-full top-100p translate-y-100p rounded p-5 group-hover:-translate-y-100p transition-all duration-300 bg-white -left-9 -bottom-28 min-w-75 lg:left-0 lg:bottom-auto">
                                    <a class="block text-14 w-full " href="/sso/logout">Uitloggen</a>
                                </div>
                                <div id="user-name" class="flex flex-col justify-center items-center h-28 text-12 text-center uppercase leading-4 cursor-pointer lg:pt-7 lg:pl-7 lg:normal-case lg:h-auto">
                                    <span class="hidden lg:inline">Ingelogd als <br></span> <span class="hidden text-primary xs:block lg:font-bold">{{ current_user.name }}</span>
                                    <span class="xs:hidden">Account</span>
                                </div>
                            {% else %}
                                <a class="block text-14 w-full text-center -mt-[6.5px]" href="/sso/login">
                                    <i class="fa-regular fa-user text-22 text-primary group-hover:opacity-70 lg:mt-0 lg:pt-10 lg:text-36"></i>
                                    <span id="user-name" class="flex flex-col justify-center items-center text-12 text-center uppercase leading-[12px] lg:normal-case lg:h-auto">
                                        <span class="">Inloggen</span>
                                    </span>
                                </a>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                {% endblock sso_login %}

                {% if (request.path == '/twin' or request.path == '/mow') %}
                <button id="info-button" 
                        class="flex flex-col items-center justify-center text-24 w-50 h-50 px-10 mt-4 ml-auto border-0 bg-white text-black lg:hidden active" 
                        aria-label="Toggle filter">
                        <span class="filterbtn icon filter-icon inline-block bg-100p w-26 h-26"></span>
                    <span class="text-12 text-black-lightest font-normal uppercase">filter</span>
                </button>
                {% endif %}

                <button id="menu-toggler"
                        class="flex flex-col justify-center ml-12 mr-16 bg-transparent border-0 w-40 h-40 justify-self-end lg:hidden collapsed"
                        type="button" 
                        data-toggle="collapse" 
                        data-target="#navbar" 
                        aria-controls="navbar"
                        aria-expanded="false" 
                        aria-label="Toggle navigation">
                    <span class="block w-50p bg-black-lightest h-2 mb-6 transition-all duration-300 min-h-2 ease-in-out"></span>
                    <span class="block w-100p bg-black-lightest h-2 mb-6 opacity-100 transition-all duration-300 min-h-2 ease-in-out"></span>
                    <span class="block w-85p bg-black-lightest h-2 mb-1 transition-all duration-300 min-h-2 ease-in-out"></span>
                    <span class="text-12 text-black-lightest font-normal uppercase transition-all duration-300 min-h-2 ease-in-out">menu</span>
                </button>
            </div>
        </header>

        <main id="main" class="ml-0 mr-0 flex flex-col flex-grow">
                {% block content %}
                {% endblock content %}
        </main>
        
        <button id="access-mobile" type="button">
            <i class="fa-solid fa-universal-access"></i>
        </button>

        <footer class="relative bg-white flex justify-center shadow-footer z-10">
            <!-- Read data from Flask backend -->
            <script>
                var appInsightsKey = '{{ appInsightsKey }}';
            </script>

            <div class="readspeaker_content w-full lg:max-w-80p">
                {% block footer %}
                {% endblock footer %}
            </div>

            <script src="{{url_for('base.static', filename='js/global-functions.js')}}"></script>
            
            <!-- Version information, doesn't need to be visible, just findable for devs -->
            <span style="display: none;">{{ Build }}</span>

            {% include "base/components/cookie-bar.html" %}

            <script>
                document.querySelector('body').classList.remove('preload');
            </script>

            <link rel="stylesheet" href="{{url_for('base.static', filename='fontawesome/css/all.min.css')}}" type="text/css">
            <script> window.rsConf = { general: { usePost: true, iframeReading: true, skipHiddenContent: true } };</script>
            <script src="https://cdn-eu.readspeaker.com/script/13998/webReader/webReader.js?pids=wr" type="text/javascript" id="rs_req_Init"></script>
            <link rel="stylesheet" href="{{url_for('base.static', filename='accessibility/css/accessibility.min.css')}}" type="text/css">
            <script src="{{url_for('base.static', filename='accessibility/js/a11y-toolbar.min.js')}}"></script>
        </footer>
    </body>
</html>
